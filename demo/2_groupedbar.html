<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>2_分组柱状图</title>
    <script src="../build/gooalcharts.js"></script>
</head>

<body>

    <div>
        <h1>2 分组柱状图</h1>

        <h2>2.1 纵向分组柱状图</h2>
        <button onclick="groupedbarGetItem1()">选择</button>
        <button onclick="groupedbarRedraw()">重画</button>

        <div id="groupedbar"></div>

        <h2>2.1 纵向分组柱状图</h2>
        <button onclick="drawgroup()">画图</button>
        <button onclick="groupedbarRedraw1()">重画</button>
        <div id="groupedbar1"></div>
        <h2>2.2 纵向分类柱状图2</h2>
        <button onclick="groupedbar2SingleSelect()">单选</button>
        <button onclick="groupedbar2MultiSelect()">多选</button>
        <button onclick="groupedbar2SelectOff()">关</button>
        <button onclick="groupedbarGetItem()">开启图例点击事件</button>
        <button onclick="groupedbarChangeColor()">改色</button>
        <div id="groupedbar2"></div>
        <h2>2.3 横向分组柱状图</h2>
        <div id="groupedbarHorizon"></div>
        <h2>2.4 横向分类柱状图2</h2>
        <div id="groupedbarHorizon2"></div>
    </div>


    <script>
        // ---------------------------------------------------------------------------------------
        // ------------------------------------2.1 纵向分组柱状图-----------------------------------
        // ---------------------------------------------------------------------------------------


        var groupoptions = {
            "id": "3",
            "type": "groupedbar",
            "data": [],
            "width": 2000,
            "titleBox": {
                "show": true,
                "position": "top",
                "title": "This is a GroupedBar"
            },
            "legendBox": {
                "show": true,
                "icon": {
                    "r": 8
                }
            },
            "axisBox": {
                "xAxis": {
                    "title": "123123",
                    "fontRotate": "auto"
                }
            }
        }
        // 第一项为主key
        var groupbarData = [{ "State": "CAAAAAAAA", "Under 5 Years": 2704659, "5 to 13 Years": 4499890, "14 to 17 Years": 2159981 },
        { "State": "TX", "Under 5 Years": 2027307, "5 to 13 Years": 3277946, "14 to 17 Years": 1420518 },
        { "State": "NY", "Under 5 Years": 1208495, "5 to 13 Years": 2141490, "14 to 17 Years": 1058031 },
        { "State": "FLLLLLLLLLLLL", "Under 5 Years": 1140516, "5 to 13 Years": 1938695, "14 to 17 Years": 925060 },
        { "State": "IL", "Under 5 Years": 894368, "5 to 13 Years": 1558919, "14 to 17 Years": 725973 },
        { "State": "PA", "Under 5 Years": 737462, "5 to 13 Years": 1345341, "14 to 17 Years": 679201 }];

        groupoptions.data = groupbarData;
        var groupedbar = new gooal.barInit("#groupedbar", groupoptions);

        // 设定tooltip
        var grouptooltip = groupedbar.addTooltip(grouptooltipConfig);
        function grouptooltipConfig(d) {
            // console.log(d)
            grouptooltip.html("key:" + d.key + "</br>" + "value: " + d.value)
        }

        function groupedbarRedraw() {
            groupedbar.redraw(1000)
        }

        let color1 = "#000000"
        // 改色功能
        function groupedbarGetItem1() {
            // 开启改色功能并传入改色方法
            groupedbar.getLegendItem(function (d, i) {
                // 改色方法，i为种类的index（点击事件接口）
                console.log(2333)
                groupedbar.changeColor(i, color1)
            })
        }



        // ---------------------------------------------------------------------------------------
        // ------------------------------------2.1 纵向分组柱状图-----------------------------------
        // ---------------------------------------------------------------------------------------


        var group1options = {
            "id": "4",
            "type": "groupedbar",
            "data": [],
            "width": 1000,
            "titleBox": {
                "show": true,
                "position": "top",
                "title": "This is a GroupedBar"
            },
            "legendBox": {
                "show": true,
                "icon": {
                    "r": 8
                }
            }
        }
        // 第一项为主key
        var groupbar1Data = [{ "State": "CAAAAAAAA", "Under 5 Years": 2704659, "5 to 13 Years": 4499890, "14 to 17 Years": 2159981 },
        { "State": "TX", "Under 5 Years": 2027307, "5 to 13 Years": 3277946, "14 to 17 Years": 1420518 },
        { "State": "NY", "Under 5 Years": 1208495, "5 to 13 Years": 2141490, "14 to 17 Years": 1058031 },
        { "State": "FLLLLLLLLLLLL", "Under 5 Years": 1140516, "5 to 13 Years": 1938695, "14 to 17 Years": 925060 },
        { "State": "IL", "Under 5 Years": 894368, "5 to 13 Years": 1558919, "14 to 17 Years": 725973 },
        { "State": "PA", "Under 5 Years": 737462, "5 to 13 Years": 1345341, "14 to 17 Years": 679201 }];

        group1options.data = groupbar1Data;
        var groupedbar1
        var grouptooltip1
        function drawgroup() {
            groupedbar1 = new gooal.barInit("#groupedbar1", group1options);
            // 设定tooltip
            grouptooltip1 = groupedbar1.addTooltip(grouptooltipConfig1);

        }

        function grouptooltipConfig1(d) {
            // console.log(d)
            grouptooltip1.html("key:" + d.key + "</br>" + "value: " + d.value)
        }

        function groupedbarRedraw1() {
            groupedbar1.redraw(1000)
        }





        // ---------------------------------------------------------------------------------------
        // ------------------------------------2.2 纵向分组柱状图2-----------------------------------
        // ---------------------------------------------------------------------------------------

        // 第一项为主key
        var groupBaroptions = {
            "id": "23",
            "type": "groupedbar2",
            "data": [],
            "width": 1500,
            // "height": 420,
            "titleBox": {
                "show": true,
                "title": "This is a GroupedBar2"
            },
            "legendBox": {
                "show": true,
                "icon": {
                    "x": 12,
                    "y": 12
                },
                "colPadding": 36,
            },
            "axisBox": {
                "xAxis": {
                    "title": "123123",
                    "fontRotate": "auto"
                }
            }
        }

        var groupbarData2 = randomData2(50)
        function randomData2(samples) {
            var fake = []
            for (i = 0; i < samples; i++) {
                var category = Math.floor(Math.random() * 100);
                var newKey = i;
                var newValue = Math.floor(Math.random() * 300);
                var tempdata = { "category": category + "呵呵呵呵呵", "key": newKey, "value": newValue, "2333": 2333 }
                fake.push(tempdata);
            }
            return fake;
        }

        groupBaroptions.data = groupbarData2;
        var groupedbar2 = new gooal.barInit("#groupedbar2", groupBaroptions);

        // 设定tooltip
        var group2tooltip = groupedbar2.addTooltip(group2tooltipConfig);
        function group2tooltipConfig(d) {
            group2tooltip.html("key:" + d.key + "</br>" + "value: " + d.value + "</br>" + "Category: " + d.category)
        }

        var selGroup = []
        // 单选/多选功能
        function groupedbar2SingleSelect() {
            groupedbar2.selectOn("single", function (d) {
                console.log(d)
            })
        }
        function groupedbar2MultiSelect() {
            groupedbar2.selectOn("multiple", function (d) {
                console.log(d)
            })
        }
        function groupedbar2SelectOff() {
            console.log(groupedbar2.selectOff())
        }

        let color = "#000000"
        // 改色功能
        function groupedbarGetItem() {
            // 开启改色功能并传入改色方法
            groupedbar2.getLegendItem(function (d, i) {
                // 改色方法，i为种类的index（点击事件接口）
                groupedbar2.changeColor(i, color)
            })
        }

        function groupedbarChangeColor() {
            // 重绘图像
            groupedbar2.redraw(1000)

        }

        // ---------------------------------------------------------------------------------------
        // ------------------------------------2.3 纵向分组柱状图2-----------------------------------
        // ---------------------------------------------------------------------------------------

        var groupHorizonoptions = {
            "id": "8",
            "type": "groupedbar",
            "data": [],
            "width": 1000,
            "titleBox": {
                "show": true,
                "position": "top",
                "title": "This is a Horizontal GroupedBar"
            },
            "legendBox": {
                "show": true
            },
            "dataBox": {
                "direction": "horizontal"
            }
        }
        groupHorizonoptions.data = groupbarData
        var groupbarHorizon = new gooal.barInit("#groupedbarHorizon", groupHorizonoptions)

        // 设定tooltip
        var groupHorizontooltip = groupbarHorizon.addTooltip(groupHorizontooltipConfig);
        function groupHorizontooltipConfig(d) {
            groupHorizontooltip.html("key:" + d.key + "</br>" + "value: " + d.value)
        }


        // ---------------------------------------------------------------------------------------
        // ------------------------------------2.4 横向分组柱状图2-----------------------------------
        // ---------------------------------------------------------------------------------------

        var groupBarHoroptions = {
            "id": "33",
            "type": "groupedbar2",
            "data": [],
            "width": 1000,
            "height": 2000,
            "titleBox": {
                "show": true,
                "title": "This is a Horzontal GroupedBar2"
            },
            "legendBox": {
                "show": true,
                "icon": {
                    "r": 8
                }
            },
            "dataBox": {
                "direction": "horizontal"
            }
        }
        // 第一项为主key
        // 横向分组图2
        groupBarHoroptions.data = groupbarData2;
        var groupedbarHori2 = new gooal.barInit("#groupedbarHorizon2", groupBarHoroptions);

        // 设定tooltip
        var grouphori2tooltip = groupedbarHori2.addTooltip(grouphori2tooltipConfig);
        function grouphori2tooltipConfig(d) {
            grouphori2tooltip.html("key:" + d.key + "</br>" + "value: " + d.value + "</br>" + "Category: " + d.category)
        }

    </script>
</body>

</html>