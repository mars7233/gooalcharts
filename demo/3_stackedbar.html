<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>3_堆叠柱状图</title>
    <script src="../build/gooalcharts.js"></script>
</head>

<body>
    <div>
        <h1>3 堆叠柱状图</h1>
        <h2>3.1 纵向堆叠柱状图</h2>
        <button onclick="redrawStack()">重画</button>
        <button onclick="hideStack()">隐藏/显示</button>
        <div id="stackedbar"></div>
        <h2>3.2 横向堆叠柱状图</h2>
        <div id="stackedbarHorizon"></div>
    </div>

    <script>
        // ---------------------------------------------------------------------------------------
        // -------------------------------------stackedbar----------------------------------------
        // ---------------------------------------------------------------------------------------
        var stackoptions = {
            "id": "1",
            "type": "stackedbar",
            "data": [],
            "width": 1000,
            "titleBox": {
                "show": true,
                "position": "bottom",
                "title": "This is a Stackedbar",
                "editable": true
            },

            "axisBox": {
                "xAxis": {
                    "title": "23232",
                    "fontRotate": "65"
                },
                "yAxis": {
                    "title": "percentAge(%)"
                }
            },
            "legendBox": {
                "show": true,
            }
        }
        // 第一项为主key
        var stackedbarData = [{ "month": new Date(2015, 0, 1), "呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵": 3840, "bananas": 1920, "cherries": 960 },
        { "month": new Date(2015, 1, 1), "呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵": 1600, "bananas": 1440, "cherries": 960 },
        { "month": new Date(2015, 1, 2), "呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵": 1300, "bananas": 1240, "cherries": 960 },
        { "month": new Date(2015, 1, 3), "呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵": 1000, "bananas": 1040, "cherries": 960 },
        { "month": new Date(2015, 2, 1), "呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵": 640, "bananas": 960, "cherries": 640 },
        { "month": new Date(2015, 3, 1), "呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵": 560, "bananas": 760, "cherries": 640 },
        { "month": new Date(2015, 4, 1), "呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵": 230, "bananas": 480, "cherries": 250 },
        { "month": new Date(2015, 5, 1), "呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵": 320, "bananas": 220, "cherries": 240 }];

        stackoptions.data = stackedbarData;
        var stackedbar = new gooal.barInit("#stackedbar", stackoptions);

        // 设定tooltip
        var stacktooltip = stackedbar.addTooltip(stacktooltipConfig);
        function stacktooltipConfig(d) {
            // console.log(d)
            stacktooltip.html("key:" + d.key + "</br>" + "value: " + d.value)
        }

        function redrawStack() {
            stackedbar.redraw(1000)
        }


        function hideStack() {
            var divEle = document.getElementById("stackedbar")
            divEle.hidden == true ? divEle.hidden = false : divEle.hidden = true
        }

        //横向堆叠图
        var stackHorizonoptions = {
            "id": "7",
            "type": "stackedbar",
            "data": [],
            "width": 1000,
            "titleBox": {
                "show": true,
                "title": "This is a Horizontal Stackedbar",
            },

            "axisBox": {
                "xAxis": {
                    "title": 2333
                },
                "yAxis": {
                    "title": 23333
                }
            },
            "legendBox": {
                "show": true
            },
            "dataBox": {
                "direction": "horizontal"
            }
        }
        stackHorizonoptions.data = stackedbarData;
        var stackedbarHorizon = new gooal.barInit("#stackedbarHorizon", stackHorizonoptions)

        // 设定tooltip
        var stackHorizontooltip = stackedbarHorizon.addTooltip(stackHorizontooltipConfig);
        function stackHorizontooltipConfig(d) {
            stackHorizontooltip.html("key:" + d.key + "</br>" + "value: " + d.value)
        }



    </script>
</body>

</html>