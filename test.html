<!DOCTYPE html>

<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Page Title</title>
    <script src="./build/gooalcharts.js"></script>
    <script src="./build/d3.js"></script>
</head>
<body>
    <h1>基因柱状图</h1>
    <div id = "groupedbar2"></div>

    <script>

        var groupBaroptions = {
            "id": "23",
            "type": "groupedbar2",
            "data": [{ "key": "233", "value": "2333"}, { "key": "233", "value": "2333" }],
            "width": 1000,
            "titleBox": {
                "show": "true/false",
                "position": "top",
                "title": "This is a GroupedBar2"
            },
            "legendBox": {
                "show": true,
                "icon": {
                    "r": 8
                }
            },
            "dataBox": {
                "direction": "vertical"
            }
        }

        var groupBarHoroptions = {
            "id": "33",
            "type": "groupedbar2",
            "data": [{ "key": "233", "value": "2333"}, { "key": "233", "value": "2333" }],
            "width": 1000,
            "titleBox": {
                "show": "true/false",
                "position": "top",
                "title": "This is a Horzontal GroupedBar2"
            },
            "legendBox": {
                "show": true,
                "icon": {
                    "r": 8
                }
            },
            "dataBox": {
                "direction": "horizontal"
            }
        }
        // 第一项为主key
        
        var groupbarData2 = randomData(40)
        function randomData(samples) {
            var fake = []
            for (i = 0; i < samples; i++) {
                var category = Math.floor(Math.random() * 5);
                var newKey = i;
                var newValue = Math.floor(Math.random() * 300);
                var tempdata = { "category": category, "key": newKey, "value": newValue }
                fake.push(tempdata);
            }
            fake.sort(function(a, b) {
					   return d3.ascending(a.category, b.category);
				   	})
            return fake;
        }
        //console.log(groupbarData2)
        groupBaroptions.data = groupbarData2;
        var groupedbar2 = new gooal.barInit("#groupedbar2", groupBaroptions);

        // 绑定事件
        function printlog(d) {
        }
        // barchart.addEvent("mouseover.log", printlog);
    
        // 设定tooltip
        var grouptooltip = groupedbar2.addTooltip(grouptooltipConfig);
        function grouptooltipConfig(d) {
            grouptooltip.html("key:" + d.key + "</br>" + "value: " + d.value +"</br>" +"Category: " +d.category)
                .style("padding", "5px")
                .style("left", (event.pageX) + "px")
                .style("top", (event.pageY + 20) + "px")
                .style("opacity", 1.0);
        }

        groupBarHoroptions.data = groupbarData2;
        var groupedbarHori2 = new gooal.barInit("#groupedbar2", groupBarHoroptions);

        // 绑定事件
        function printlog(d) {
        }
        // barchart.addEvent("mouseover.log", printlog);
    
        // 设定tooltip
        var grouptooltip = groupedbarHori2.addTooltip(grouptooltipConfig);
        function grouptooltipConfig(d) {
            grouptooltip.html("key:" + d.key + "</br>" + "value: " + d.value +"</br>" +"Category: " +d.category)
                .style("padding", "5px")
                .style("left", (event.pageX) + "px")
                .style("top", (event.pageY + 20) + "px")
                .style("opacity", 1.0);
        }
    
    
    </script>
</body>
</html>